function getRandom(){return"?random="+Math.random()}var DeviceType={samsung:[_("Samsung"),"#4b7bc2","-88px -308px"],apple:[_("Apple"),"#909eb0"],huawei:[_("Huawei"),"#f05c57"],xiaomi:[_("XiaoMi"),"#f68330"],vivo:[_("vivo"),"#51b3e7"],oppo:[_("OPPO"),"#61d237"],meizu:[_("Meizu"),"#42c4ea"],leshi:[_("LeTV"),"#f60000"],sony:[_("Sony"),"#676767"],acer:[_("Acer"),"#61d237"],nokia:[_("Nokia"),"#239bdd","0 -396px"],asus:[_("Asus"),"#458aee","0 0"],lenovo:[_("Lenovo"),"#499ee3"],moto:[_("Moto"),"#00c2d8"],amoi:[_("Amoi"),"#1886d4"],zte:[_("ZTE"),"#4b7bc2"],google:[_("Google"),"#245bf1"],hisense:[_("Hisense"),"#00897a"],gionee:[_("Gionee"),"#e40600"],tenda:[_("Tenda"),"#ff6600"],amazon:[_("Amazon"),"#ffb709"],smartisan:[_("Smartisan"),"#e53d3c"],oneplus:[_("OnePlus"),"#e63434"],lg:[_("LG"),"#ef528c"],htc:[_("HTC"),"rgba(131, 205, 41, 1)"],tcl:[_("TCL"),"#f05c57"],other:[_("?"),"#92979A"]};function translateManufacturer(type){var str="";return str+="<span class='hostlogo logo-"+type+"'></span>"}var statusMsg={"0101":_("WAN port disconnected. Please connect an Ethernet cable with Internet connectivity to the port."),"0102":_("Disconnected"),"0103":_("Connecting... Detecting the Internet..."),"0104":_("Connected... Accessing the Internet..."),"0105":_("Internet is inaccessible. Please contact your ISP."),"0106":_("Connected. You can access the internet."),"0201":_("WAN port disconnected. Please connect an Ethernet cable with Internet connectivity to the port."),"0202":_("Disconnected"),"0203":_("Connecting... Detecting the Internet..."),"0204":_("Connected... Accessing the Internet..."),"0205":_("The router has obtained a valid IP address but cannot access the Internet. Please try the solutions below one by one.")+"<br/>1. <a id='cloneMac' style='text-decoration:underline;' class='text-success' href='javascript:void(0)'>"+_("Clone MAC Address")+"</a>"+_("(MAC cloning will take effect in 30 seconds.)")+"<br/>"+_("2. Reconfigure the router on another computer.")+"<br/>"+_("3. Please make sure that you have subscribed to a valid internet service. For details, consult your ISP."),"0206":_("Connected. You can access the internet."),"0207":_("IP conflict. Please change the LAN IP address."),"0208":_("Error: No response from the remote server. Please contact your ISP."),"0301":_("WAN port disconnected. Please connect an Ethernet cable with Internet connectivity to the port."),"0302":_("Disconnected"),"0303":_("Checking the user name and password... Please wait 1-5 minutes."),"0304":_("Dial-up connection succeeded. Accessing the Internet..."),"0305":_("Dial-up connection succeeded but the internet is inaccessible. Please contact your ISP."),"0306":_("Connected. You can access the internet."),"0307":_("Failed. Please confirm your user name and password and try again."),"0308":_("Error: No response from the remote server. Please contact your ISP."),1102:_("No hotspot"),1103:_("Bridging in WISP mode..."),1104:_("Bridged successfully in WISP mode. Accessing the internet..."),1105:_("Internet is inaccessible. Please contact your ISP."),1106:_("Connected. You can access the internet."),1107:_("The WiFi password of the upstream device is incorrect."),1202:_("No hotspot"),1203:_("Bridging in WISP mode..."),1204:_("Bridged successfully in WISP mode. Accessing the internet..."),1205:_("An IP address is obtained but the internet is inaccessible. Please contact your ISP."),1206:_("Connected. You can access the internet."),1207:_("IP conflict. Please change the LAN IP address."),1208:_("Error: No response from the remote server. Please contact your ISP."),1209:_("The WiFi password of the upstream device is incorrect."),1302:_("No hotspot"),1303:_("Checking the user name and password... Please wait 1-5 minutes."),1304:_("Dial-up connection succeeded. Accessing the Internet..."),1305:_("Dial-up connection succeeded but the internet is inaccessible. Please contact your ISP."),1306:_("Connected. You can access the internet."),1307:_("Failed. Please confirm your user name and password and try again."),1308:_("Error: No response from the remote server. Please contact your ISP."),1309:_("The WiFi password of the upstream device is incorrect."),2102:_("No signal"),2103:_("Bridging in Universal Repeater mode..."),2104:_("Bridged in Universal Repeater mode"),2202:_("No signal"),2203:_("Bridging in Universal Repeater mode..."),2204:_("Bridged in Universal Repeater mode"),2302:_("No signal"),2303:_("Bridging in Universal Repeater mode..."),2304:_("Bridged in Universal Repeater mode"),2107:_("The WiFi password of the upstream device is incorrect."),2209:_("The WiFi password of the upstream device is incorrect."),2309:_("The WiFi password of the upstream device is incorrect."),4102:_("Connection failure"),4104:_("Connection success"),4202:_("Connection failure"),4204:_("Connection success"),4302:_("Connection failure"),4304:_("Connection success")},lanWanIPConflict=!1;function updateInternetConnectStatus(obj,elemID){lanWanIPConflict||("true"==obj.lanWanIPConflict?(lanWanIPConflict=!0,alert(_("IP conflict! The login IP address will be changed into %s automatically.Please log in again using %s.",[obj.newLanIP,obj.newLanIP])),dynamicProgressLogic.init("reboot","",450,obj.newLanIP)):function(statusCode,elemID){var connectStatus,connectMsg,str="";if(!statusCode){return}connectStatus=statusCode.slice(1,2),connectMsg=statusCode.slice(3,7),str="3"==connectStatus?"text-success":"2"==connectStatus?"text-primary":"text-danger";$("#"+elemID).html(statusMsg[connectMsg]).attr("class",str)}(obj.wanConnectStatus,elemID))}function checkIpInSameSegment(ip_lan,mask_lan,ip_wan,mask_wan){if(""===ip_lan||""===ip_wan){return !1}var i,ip1Arr=ip_lan.split("."),ip2Arr=ip_wan.split("."),maskArr1=mask_lan.split("."),maskArr2=mask_wan.split("."),maskArr=maskArr1;for(i=0;i<4;i++){if(maskArr1[i]!=maskArr2[i]){maskArr=(maskArr1[i]&maskArr2[i])==maskArr1[i]?maskArr1:maskArr2;break}}for(i=0;i<4;i++){if((ip1Arr[i]&maskArr[i])!=(ip2Arr[i]&maskArr[i])){return !1}}return !0}function checkIsVoildIpMask(ip,mask,str){var ipArry,maskArry,len,maskArry2=[],netIndex=0,netIndex1=0,broadIndex=0,i=0;for(str=str||_("IP Address"),ipArry=ip.split("."),maskArry=mask.split("."),len=ipArry.length,i=0;i<len;i++){maskArry2[i]=255-Number(maskArry[i])}for(var k=0;k<4;k++){0==(ipArry[k]&maskArry[k])?netIndex1+=0:netIndex1+=1}for(k=0;k<4;k++){0==(ipArry[k]&maskArry2[k])?netIndex+=0:netIndex+=1}if(0==netIndex||0==netIndex1){return _("%s cannot be a network segment.",[str])}for(var j=0;j<4;j++){255==(ipArry[j]|maskArry[j])?broadIndex+=0:broadIndex+=1}return 0==broadIndex?_("%s cannot be a broadcast address.",[str]):void 0}function objToString(obj){var prop,str="";for(prop in obj){str+=prop+"="+encodeURIComponent(obj[prop])+"&"}return str=str.replace(/[&]$/,"")}function inputValue(obj,callback){var prop;for(prop in obj){if(prop&&0<$("#"+prop).length){switch(document.getElementById(prop).tagName.toLowerCase()){case"input":case"select":"checkbox"==document.getElementById(prop).type?"true"==obj[prop]?document.getElementById(prop).checked=!0:document.getElementById(prop).checked=!1:$("#"+prop).val(obj[prop]);break;default:$("#"+prop).hasClass("textboxs")||$("#"+prop).hasClass("input-append")?$("#"+prop)[0].val(obj[prop]):$("#"+prop).text(obj[prop])}}else{prop&&1<$("[name='"+prop+"']").length&&"input"===document.getElementsByName(prop)[0].tagName.toLowerCase()&&0<$("[name='"+prop+"'][value='"+obj[prop]+"']").length&&($("[name='"+prop+"'][value='"+obj[prop]+"']")[0].checked=!0)}}"function"==typeof callback&&callback.apply()}function formatSeconds(value){var theTime=parseInt(value),theTime1=0,theTime2=0,theTime3=0;60<theTime&&(theTime1=parseInt(theTime/60),theTime=parseInt(theTime%60),60<theTime1&&(theTime2=parseInt(theTime1/60),theTime1=parseInt(theTime1%60),24<theTime2&&(theTime3=parseInt(theTime2/24),theTime2=parseInt(theTime2%24))));var result=""+parseInt(theTime)+_("s");return 0<theTime1&&(result=""+parseInt(theTime1)+_("m")+" "+result),0<theTime2&&(result=""+parseInt(theTime2)+_("h")+" "+result),0<theTime3&&(result=""+parseInt(theTime3)+_("d")+" "+result),result}function Encode(){var base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";return function(s){return function(str){var out,i,len,c1,c2,c3;for(len=str.length,i=0,out="";i<len;){if(c1=255&str.charCodeAt(i++),i==len){out+=base64EncodeChars.charAt(c1>>2),out+=base64EncodeChars.charAt((3&c1)<<4),out+="==";break}if(c2=str.charCodeAt(i++),i==len){out+=base64EncodeChars.charAt(c1>>2),out+=base64EncodeChars.charAt((3&c1)<<4|(240&c2)>>4),out+=base64EncodeChars.charAt((15&c2)<<2),out+="=";break}c3=str.charCodeAt(i++),out+=base64EncodeChars.charAt(c1>>2),out+=base64EncodeChars.charAt((3&c1)<<4|(240&c2)>>4),out+=base64EncodeChars.charAt((15&c2)<<2|(192&c3)>>6),out+=base64EncodeChars.charAt(63&c3)}return out}(function(str){var out,i,len,c;for(out="",len=str.length,i=0;i<len;i++){1<=(c=str.charCodeAt(i))&&c<=127?out+=str.charAt(i):(2047<c?(out+=String.fromCharCode(224|c>>12&15),out+=String.fromCharCode(128|c>>6&63)):out+=String.fromCharCode(192|c>>6&31),out+=String.fromCharCode(128|c>>0&63))}return out}(s))}}function checkIsTimeOut(str){return -1!=str.indexOf("<!DOCTYPE")}function addOverLay(time){time=time||0;$("body").append("<div class='save-overlay'></div>"),setTimeout(function(){$(".save-overlay").remove()},time)}function isEmptyObject(obj){var name;for(name in obj){return !1}return !0}function PageLogic(urlObj){var moduleArry,_this=this;this.init=function(){moduleArry=this.modules,this.pageRunning=!0,this.initEvent();for(var i=0;i<moduleArry.length;i++){"function"==typeof moduleArry[i].init&&moduleArry[i].init()}this.addValidate(),this.getValue(urlObj.getUrl,urlObj.modules)},this.initEvent=function(){},this.reCancel=function(){_this.initValue(_this.data)},this.updateTimer=null,this.update=function(modules,time,callback){time=time||0,_this.pageRunning&&0!=time?(clearTimeout(this.updateTimer),0!=time&&(this.updateTimer=setTimeout(function(){_this.update(modules,time,callback)},time)),"string"==typeof urlObj.getUrl&&$.get(urlObj.getUrl+"?"+Math.random()+"&modules="+encodeURIComponent(modules),function(obj){checkIsTimeOut(obj)&&top.location.reload(!0);try{obj=$.parseJSON(obj)}catch(e){obj={}}isEmptyObject(obj)&&top.location.reload(!0),_this.pageRunning&&"function"==typeof callback&&callback.apply(this,[obj])})):clearTimeout(this.updateTimer)},this.getValue=function(getUrl,modules){if(this.pageRunning&&"string"==typeof getUrl){var data="";data=modules?$.encodeFormData({random:Math.random(),modules:modules}):Math.random(),$.get(getUrl+"?"+data,_this.initValue)}},this.initValue=function(obj){var moduleName,i;if("string"==typeof obj){checkIsTimeOut(obj)&&top.location.reload(!0);try{obj=$.parseJSON(obj)}catch(e){obj={}}}if(isEmptyObject(obj)&&top.location.reload(!0),_this.data=obj,_this.pageRunning){for(i=0;i<moduleArry.length;i++){moduleName=moduleArry[i].moduleName,"function"==typeof moduleArry[i].initValue&&moduleArry[i].initValue(_this.data[moduleName])}mainLogic&&"object"==typeof mainLogic&&mainLogic.initModuleHeight()}},this.getSubmitData=function(){for(var data="",moduleData="",i=0;i<moduleArry.length;i++){"function"==typeof moduleArry[i].getSubmitData&&""!=(moduleData=moduleArry[i].getSubmitData())&&(data+=moduleData+"&")}return data=data.replace(/[&]$/,"")},this.addValidate=function(){this.validate=$.validate({custom:function(){for(var msg,i=0;i<moduleArry.length;i++){if("function"==typeof moduleArry[i].checkData&&(msg=moduleArry[i].checkData.apply()),msg){return msg}}},success:function(){_this.preSubmit()},error:function(msg){msg&&_this.showPageMsg(msg)}})},this.preSubmit=function(){if("function"!=typeof _this.beforeSubmit||_this.beforeSubmit()){var data=_this.getSubmitData();addOverLay(1000),mainLogic.showModuleMsg(_("Saving...")),$.ajax({url:urlObj.setUrl,type:"POST",data:data,success:_this.successCallback,error:_this.ajaxErrMsg})}},this.successCallback=function(msg){if(checkIsTimeOut(msg)){top.location.reload(!0)}else{var num=$.parseJSON(msg).errCode||"-1",ip=_this.rebootIP||"";0==+num?(mainLogic.showModuleMsg(_("Saved successfully.")),_this.getValue(urlObj.getUrl,urlObj.modules)):"2"==num?mainLogic.showModuleMsg(_("Failed to change the password. Old Password is incorrect.")):"100"==num?(mainLogic.hideModuleMsg(),dynamicProgressLogic.init("reboot","",450,ip)):"101"==num&&(window.location="./login.html"),$("#submit").removeAttr("disabled")}},this.ajaxErrMsg=function(){_this.showPageMsg(_("Failed to upload the data."))},this.showPageMsg=function(msg){mainLogic.showModuleMsg(msg)}}function isAllNumber(arry){var i=0,len=arry.length||0;for(i=0;i<len;i++){if(isNaN(Number(arry[i]))){return !1}}return !0}function isAllIp(arry){var i=0,len=arry.length||0;for(i=0;i<len;i++){if(!/^([1-9]|[1-9]\d|1\d\d|2[0-1]\d|22[0-3])\.(([0-9]|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.){2}([0-9]|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])$/.test(arry[i])){return !1}}return !0}function isAllMac(arry){var i=0,len=arry.length||0;for(i=0;i<len;i++){if(!/^([0-9a-fA-F]{2}:){5}[0-9a-fA-F]{2}$/.test(arry[i])){return !1}}return !0}function reCreateObj(obj,prop,sortTag){for(var numberFlag,ipFlag,macFlag,newObj=[],len=obj.length||0,i=0,j=0,newArry=[],arry_prop=[],temporaryObj=[],k=0;k<len;k++){temporaryObj[k]=obj[k]}for(i=0;i<len;i++){arry_prop[i]=temporaryObj[i][prop]}for(numberFlag=isAllNumber(arry_prop),ipFlag=isAllIp(arry_prop),macFlag=isAllMac(arry_prop),newArry=numberFlag||ipFlag||macFlag?arry_prop.sort(function(a,b){return parseInt(a.replace(/[.:]/g,""),16)-parseInt(b.replace(/[.:]/g,""),16)}):arry_prop.sort(),i=0;i<len;i++){for(j=0;j<temporaryObj.length;j++){if(newArry[i]==temporaryObj[j][prop]){newObj.push(temporaryObj[j]),temporaryObj.splice(j,1);break}}}return"up"==sortTag?newObj:newObj.reverse()}function Dialog(){var _this=this;this.obj={fistInit:!0,data:{}},this.open=function(obj){this.obj.data=obj,$("#progress-overlay").hasClass("in")||$("#progress-overlay").addClass("in"),$("#"+this.obj.data.Id).removeClass("none"),$("#"+this.obj.data.Id).css("height",this.obj.data.height),this.obj.fistInit&&($(".dialog").delegate(".dialog-close, .cancel","click",function(){_this.close()}),this.obj.fistInit=!1),"function"==typeof this.obj.data.callback&&this.obj.data.callback.apply()},this.close=function(){$("#"+this.obj.data.Id).addClass("none"),$("#progress-overlay").removeClass("in")}}function getStrByteNum(str){for(var charCode,totalLength=0,i=str.length-1;0<=i;i--){(charCode=str.charCodeAt(i))<=127?totalLength++:totalLength+=128<=charCode&&charCode<=2047?2:2048<=charCode&&charCode<=65535?3:4}return totalLength}function removeValidateNum(arr){var len=arr.length,i=0;for(i=0;i<len;i++){0<$("#"+arr[i]).length&&($("#"+arr[i]).removeValidateTipError(!0),$.validate.utils.check.call($("#"+arr[i])[0]))}}window.JSON&&($.parseJSON=JSON.parse),$.getData=function(getUrl,modules,callback){if("string"==typeof getUrl){var data="";data=modules?$.encodeFormData({random:Math.random(),modules:modules}):Math.random(),$.get(getUrl+"?"+data,function(dt){var obj={};try{obj=$.parseJSON(dt)}catch(e){obj={}}isEmptyObject(obj)&&top.location.reload(!0),"function"==typeof callback&&callback.apply(this,[obj])})}},$.include({removeValidateTipError:function(valid){return this.each(function(){$("#"+this.validateTipId)&&($("#"+this.validateTipId).parent().removeClass("has-error").removeClass("has-feedback"),$("#"+this.validateTipId).remove(),this.validateTipId="")})}}),function($,window,undefined){var _DEFAULT={title:"消息提醒",content:"消息体",isIframe:!1,height:0,width:0,buttons:[],autoClose:!1,timeout:60};function ModalDialog(opt){this.opt=$.extend({},_DEFAULT,opt);this.$mask=$('<div class="md-modal-wrap"><div class="md-modal"><div class="md-content"><h3 class="md-header"></h3><button class="md-close">×</button><div class="md-con-body"></div><div class="md-toolbar"></div></div></div></div>'),this.$overlay=$('<div class="md-overlay"></div>'),this.$title=this.$mask.find(".md-header"),this.$close=this.$mask.find(".md-close"),this.$content=this.$mask.find(".md-con-body"),this.$footer=this.$mask.find(".md-toolbar"),this.namespace="Modal_"+(new Date).getTime(),this.TIMEOUT=null,$("body").append(this.$overlay).append(this.$mask),this.init(),this.bindEvets()}function isFunction(func){return !(!func||"function"!=typeof func)}ModalDialog.prototype={init:function(){this.$title.text(this.opt.title);this.$content.html(),this.opt.isIframe?(this.iframeName="Modal_Iframe",this.iframe='<iframe src="'+this.opt.content+'" name="'+this.iframeName+'" />',this.$content.html(this.iframe)):($(this.opt.content).show(),this.$content.append(this.opt.content)),this.reSize(),0<this.opt.width&&this.$content.css("width",this.opt.width+"px"),0<this.opt.height&&this.$content.css("height",this.opt.height+"px"),this.setButtons(this.opt.buttons),this.show()},getSize:function(){this.opt.MAX_Height=0.8*(window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body.clientHeight)-40,this.opt.MAX_Width=0.8*(window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body.clientWidth)},setButtons:function(btns){if(btns&&"[object Array]"==Object.prototype.toString.call(btns)&&!(btns.length<1)){for(var i=0,l=btns.length;i<l;i++){!function(i){var btn=btns[i];$(btn.content).on("click",function(e){isFunction(btn.callback)&&btn.callback.call(e.target||e.srcElement)})}(i)}this.opt.buttons=btns}},show:function(callback){this.$overlay.addClass("md-show"),this.$mask.addClass("md-show"),isFunction(callback)&&callback()},hide:function(callback){this.$overlay.removeClass("md-show"),this.$mask.removeClass("md-show"),isFunction(callback)&&callback()},toggle:function(callback){this.$overlay.toggleClass("md-show"),this.$mask.toggleClass("md-show"),isFunction(callback)&&callback()},reSize:function(opt){this.getSize(),this.$content.css({"max-height":this.opt.MAX_Height+"px","max-width":this.opt.MAX_Width+"px"})},setTitle:function(text){text&&(this.$title.text(text),this.opt.title=text)},refresh:function(){},bindEvets:function(){var _this=this;$(window).on("resize",function(event){_this.TIMEOUT&&(window.clearTimeout(_this.TIMEOUT),_this.TIMEOUT=null),_this.TIMEOUT=window.setTimeout(function(){_this.reSize.call(_this)},300)}),_this.$close.on("click",function(e){return _this.hide(),!1}),_this.$footer.on("click",function(e){return $(e.target).hasClass("md-btn")&&_this.hide(),!1})}},$.fn.modalDialog=function(opt){return this.ModalDialog=new ModalDialog(opt),this},$.modalDialog=function(opt){return new ModalDialog(opt)}}(jQuery,window);